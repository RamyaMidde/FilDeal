<div *ngIf="loaderShow" class="preloader"></div>
<section id="main-slider-section" class="review-slider-section coupon-bc">
    <div class="container">
        <div class="row">
            <div class="col-sm-3 col-lg-3">
            </div>
            <div class="col-sm-9 col-lg-9">
                <h1 class="review-slider-title">{{storeName}} Offers & Coupons</h1>
                <p class="review-slider-subtitle">By using these codes, you can enjoy significant discounts on your
                    order amount, free shipping, and more.</p>
            </div>

        </div>
    </div>
</section>

<section class="coupon-area">
    <div class="container-fluid  custom-width">
        <div class="row">
            <div class="offset-1 col-lg-2  con-width ">
                <div class="coupon-sin-sidebar ">
                    <span style="font-weight: 600;">Filters</span>
                    <input type="text" class="overall-search-input filter-search-input" [(ngModel)]="searchterm"
                        placeholder="Search" autocomplete="off">

                    <h2 style="margin-top: 9%;">Stores</h2>
                    <div class="csb-inner">
                        <form action="" method="get">
                            <ul class="scrol-bar">
                                <li *ngFor="let x of topStoreData | filter:searchterm">
                                    <input type="checkbox" (change)="onChangeStoreCatgy(x.id)"
                                        [checked]="selectedMerctStore.includes(x.id)">
                                    <span class="pc ">{{x.name}}</span>
                                </li>
                            </ul>
                        </form>
                    </div>
                </div>


            </div>

            <div class=" offset-1 col-lg-7 ">

                <div *ngIf="offerDataList.length == ''" class="sin-coupon row no-gutters">
                    <div class="col-sm-9 col-lg-6 col-xl-7">
                        <div class="">
                            <p style="color: red; text-align: center; font-weight: 600;">No Coupon Offers for this store
                            </p>
                        </div>
                    </div>
                </div>

                <div *ngFor="let x of offerDataList" class="sin-coupon row no-gutters">
                    <div class="col-sm-3 col-lg-2 col-xl-2">
                        <div class="coupon-img">
                            <img src="{{x.merchant_logo}}" alt="22">
                        </div>
                    </div>
                    <div class="col-sm-9 col-lg-6 col-xl-7">
                        <div class="coupon-content">
                            <h2> {{x.title}}</h2>
                            <p>{{x.merchant_name}}</p>
                        </div>
                        <div class="coupon-accordion">  
                            <div id="accordion">
                                <div class="card">
                                    <div class="card-header" id="headingThree">
                                        <h5 class="mb-0">
                                            <button class="coupon-card-btn" data-toggle="collapse"
                                                data-target="#collapseThree" aria-expanded="false"
                                                aria-controls="collapseThree">Coupon details</button>
                                        </h5>
                                    </div>
                                    <div id="collapseThree" class="collapse" aria-labelledby="headingThree"
                                        data-parent="#accordion">
                                        <div class="card-body coupon-card-body">
                                            <p>{{x.description}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 col-lg-4 col-xl-3">
                        <div data-toggle="modal" data-target=".bd-example-modal-lg-product-1"
                            (click)="getTopStoresModel(x.id)" class="coupon-code">
                            <button type="button" class="con-hcode"><a style="color: white;" href="{{x.affiliate_link}}"
                                    target="_blank">Get Store</a>
                            </button>
                        </div>
                    </div>
                </div>

            </div>


        </div>
    </div>
</section>


<!-- modal popup for get coupn code -->
<div class="modal fade bd-example-modal-lg-product-1" id="exampleModalCenter" tabindex="-1" role="dialog"
    aria-hidden="true">
    <div class="coupon-modal modal-dialog modal-dialog-centered" role="document">
        <div *ngFor="let x of toStoredats" class="modal-content">
            <div class="modal-header cd-modal-header">
                <img src="{{x.merchant_logo}}" alt="store_logo" width="100" height="80">    <p class="deal-activity title">{{x.title}}</p>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="coupon-modal-body">
                <div class="coupon-show">
                    <p style="font-weight: 600;">{{x?.coupon_code || 'No Coupon Code Required' }} <i
                            style="color: green;cursor:pointer" class="fa fa-copy"></i></p>
                    <div class="offer-meta-txt">
                        <div class="activate-wrapper">
                            <img alt="verified-icon" width="30" src="assets/img/verified_icon.png"
                                class="verified-icon">
                            <span>FilDeal Activated</span>
                        </div>
                    </div>
                    <div class="store-cta load-offer-btn outlink">
                        <a href="{{x.affiliate_link}}" target="_blank">
                        <div class="outlink-icon">
                        </div>
                        <span class="store-link " gtm-trigger="outclick">Go To <span class="store-link" data-type="html"
                                data-model="storeName">{{x.merchant_name}}</span> Website</span>
                            </a>
                    </div>
                </div>
                <div class="coupon-feedback">
                    <div class="smile-wrapper">
                        <ul class="smile">
                            <li><a href="#"><i class="fa fa-thumbs-o-up"></i></a></li>
                            <li><a href="#"><i class="fa fa-thumbs-o-down "></i></a></li>
                            <li><a href="#"><i class="fa fa-star-o"></i></a></li>
                        </ul>
                        <p>Did this help you save money?</p>
                    </div>
                    <a href="{{x.affiliate_link}}" target="_blank" class="mod-store-btn">Go to Store</a>
                </div>
            </div>
            <div class="modal-footer">
                <div class="mf-left"> <i class="fa fa-signal" aria-hidden="true"></i>17548 People View This</div>
                <div class="mf-right">
                    <ul class="coupon-soc">
                        <li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>

                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
